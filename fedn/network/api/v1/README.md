# API Documentation - `/v1`

This directory contains the implementation of the version 1 (v1) API for the FEDn network. The API provides endpoints for managing and interacting with the network.

## Overview

The v1 API provides RESTful endpoints for retrieving, adding, and updating data records generated by the FEDn network.

## Endpoints

Below is a summary of the main endpoints:

- **`Clients`**: Manage client entities.
  - **`GET /clients`**: List all clients.
  - **`POST /clients/list`**: List all clients. Use this when filtering for multiple values of the same field.
  - **`GET /clients/count`**: Count all clients.
  - **`POST /clients/count`**: Count all clients. Use this when filtering for multiple values of the same field.
  - **`GET /clients/{id}`**: Retrieve details of a specific client.
  - **`DELETE /clients/{id}`**: Remove a client from the network.
  - **`POST /clients/add`**: Register a new client.
  - **`PUT /clients/config`**: Get the configuration of a client.
- **`Combiners`**: Manage combiner entities.
    - **`GET /combiners`**: List all combiners.
    - **`POST /combiners/list`**: List all combiners. Use this when filtering for multiple values of the same field.
    - **`GET /combiners/count`**: Count all combiners.
    - **`POST /combiners/count`**: Count all combiners. Use this when filtering for multiple values of the same field.
    - **`GET /combiners/{id}`**: Retrieve details of a specific combiner.
    - **`DELETE /combiners/{id}`**: Remove a combiner from the network.
    - **`POST /combiners/clients/count`**: Count all clients of a combiner.
- **`Helper`**: Set and get active helpers.
    - **`GET /helpers/active`**: Get the active helper.
    - **`PUT /helpers/active`**: Set the active helper.
- **`Metrics`**: Manage metrics entities.
    - **`GET /metrics`**: List all metrics.
    - **`POST /metrics/list`**: List all metrics. Use this when filtering for multiple values of the same field.
    - **`GET /metrics/count`**: Count all metrics.
    - **`POST /metrics/count`**: Count all metrics. Use this when filtering for multiple values of the same field.
    - **`GET /metrics/{id}`**: Retrieve details of a specific metric.
- **`Models`**: Manage model entities.
    - **`GET /model`**: List all models.
    - **`POST /model/list`**: List all models. Use this when filtering for multiple values of the same field.
    - **`GET /model/count`**: Count all models.
    - **`POST /model/count`**: Count all models. Use this when filtering for multiple values of the same field.
    - **`GET /model/{id}`**: Retrieve details of a specific model.
    - **`PATCH /model/{id}`**: Update model information. Will only update the fields provided in the request body.
    - **`PUT /model/{id}`**: Update model information.
    - **`GET /model/{id}/descendants`**: Get all descendants of a model.
    - **`GET /model/{id}/ancestors`**: Get all ancestors of a model.
    - **`GET /model/{id}/parameters`**: Get the parameters of a model.
    - **`GET /model/leaf-nodes`**: Get all leaf nodes of a model. Meaning all models that are not parents of any other model.
    - **`GET /model/download`**: Download a model.
    - **`POST /model`**: Upload a model.
- **`Packages`**: Manage packages (compute package) entities.
    - **`GET /packages`**: List all packages.
    - **`POST /packages/list`**: List all packages. Use this when filtering for multiple values of the same field.
    - **`GET /packages/count`**: Count all packages.
    - **`POST /packages/count`**: Count all packages. Use this when filtering for multiple values of the same field.
    - **`GET /packages/{id}`**: Retrieve details of a specific package.
    - **`POST /packages`**: Upload a new package.
    - **`GET /packages/download`**: Download the active package.
    - **`GET /packages/checksum`**: Get the checksum of the active package.
    - **`GET /packages/active`**: Get the active package.
    - **`PUT /packages/active`**: Set the active package.
    - **`DELETE /packages/active`**: Delete the active package.
- **`Predictions`**: Manage predictions entities.
    - **`GET /predictions`**: List all predictions.
    - **`POST /predictions/list`**: List all predictions. Use this when filtering for multiple values of the same field.
    - **`GET /predictions/count`**: Count all predictions.
    - **`POST /predictions/count`**: Count all predictions. Use this when filtering for multiple values of the same field.
    - **`GET /predictions/{id}`**: Retrieve details of a specific prediction.
- **`Rounds`**: Manage (session training) round entities.
    - **`GET /rounds`**: List all rounds.
    - **`POST /rounds/list`**: List all rounds. Use this when filtering for multiple values of the same field.
    - **`GET /rounds/count`**: Count all rounds.
    - **`POST /rounds/count`**: Count all rounds. Use this when filtering for multiple values of the same field.
    - **`GET /rounds/{id}`**: Retrieve details of a specific round.
- **`Runs`**: Manage (session training) run entities. (Stored whenever training is started)
    - **`GET /runs`**: List all runs.
    - **`POST /runs/list`**: List all runs. Use this when filtering for multiple values of the same field.
    - **`GET /runs/count`**: Count all runs.
    - **`POST /runs/count`**: Count all runs. Use this when filtering for multiple values of the same field.
    - **`GET /runs/{id}`**: Retrieve details of a specific run.
- **`Sessions`**: Manage session entities.
    - **`GET /sessions`**: List all sessions.
    - **`POST /sessions/list`**: List all sessions. Use this when filtering for multiple values of the same field.
    - **`GET /sessions/count`**: Count all sessions.
    - **`POST /sessions/count`**: Count all sessions. Use this when filtering for multiple values of the same field.
    - **`GET /sessions/{id}`**: Retrieve details of a specific session.
    - **`POST /sessions`**: Create a new session.
    - **`POST /sessions/start`**: Start a new training round for a session.
    - **`PATCH /sessions/{id}`**: Update session information. Will only update the fields provided in the request body.
    - **`PUT /sessions/{id}`**: Update session information.
- **`Statuses`**: Manage status entities. (Events that are stored in the database)
    - **`GET /statuses`**: List all statuses.
    - **`POST /statuses/list`**: List all statuses. Use this when filtering for multiple values of the same field.
    - **`GET /statuses/count`**: Count all statuses.
    - **`POST /statuses/count`**: Count all statuses. Use this when filtering for multiple values of the same field.
    - **`GET /statuses/{id}`**: Retrieve details of a specific status.
- **`Telemetry`**: Manage telemetry entities.
    - **`GET /telemetry`**: List all telemetry data.
    - **`POST /telemetry/list`**: List all telemetry data. Use this when filtering for multiple values of the same field.
    - **`GET /telemetry/count`**: Count all telemetry data.
    - **`POST /telemetry/count`**: Count all telemetry data. Use this when filtering for multiple values of the same field.
    - **`GET /telemetry/{id}`**: Retrieve details of a specific telemetry record.
    - **`POST /telemetry`**: Add new telemetry data.
- **`Validations`**: Manage validation entities.
    - **`GET /validations`**: List all validations.
    - **`POST /validations/list`**: List all validations. Use this when filtering for multiple values of the same field.
    - **`GET /validations/count`**: Count all validations.
    - **`POST /validations/count`**: Count all validations. Use this when filtering for multiple values of the same field.
    - **`GET /validations/{id}`**: Retrieve details of a specific validation.


## Filtering
All get (many) endpoints support filtering. You can use query parameters to filter results based on specific fields. For example:

```
GET /clients?name=John
```
This will return all clients with the name "John".
You can also use multiple filters:
```
GET /clients?name=John&status=active
```
To filter by multiple values of the same field, use the `list` endpoint:
```
POST /clients/list
{
  "name": ["John", "Doe"]
}
```
To filter for missing values, use `null` as value:
```
GET /clients?name=null
```
For value types like numbers and dates, you can use comparison operators:
```
GET /clients?commit_time__gt=2023-01-01
```
Full list of comparison operators:
- `__gt`: Greater than
- `__lt`: Less than
- `__gte`: Greater than or equal to
- `__lte`: Less than or equal to
- `__ne`: Not equal
- `__eq`: Equal

## Authentication

The API requires authentication via API keys. Include the API key in the `Authorization` header of your requests:

```
Authorization: Bearer <API_KEY>
```

## Error Handling

The API returns standard HTTP status codes to indicate success or failure:
- `200 OK`: Request succeeded.
- `400 Bad Request`: Invalid input.
- `401 Unauthorized`: Missing or invalid API key.
- `404 Not Found`: Resource not found.
- `500 Internal Server Error`: Server encountered an error.